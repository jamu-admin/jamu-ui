[package]
description = "AI Agent Platform based on Zed Editor - Minimal Build"
edition.workspace = true
name = "zed"
version = "0.0.1"
publish.workspace = true
license = "GPL-3.0-or-later"
authors = ["Zed Team <hi@zed.dev>", "Jamu Team"]

[lints]
workspace = true

[[bin]]
name = "jamu"
path = "src/zed-main.rs"

[lib]
name = "zed"
path = "src/main.rs"

# ============================================
# JAMU MINIMAL DEPENDENCIES
# Only what's needed for agent-only interface
# Build time: ~2-3 minutes instead of 12-15
# ============================================

[dependencies]
# Core agent functionality (REQUIRED)
agent.workspace = true
agent_settings.workspace = true
agent_ui.workspace = true
acp_tools.workspace = true
assistant_tools.workspace = true

# Language models (REQUIRED)
language_model.workspace = true
language_models.workspace = true
anthropic.workspace = true
codestral.workspace = true
open_ai.workspace = true
google_ai.workspace = true
ollama.workspace = true
open_router.workspace = true

# Core UI framework (REQUIRED)
gpui = { workspace = true, features = ["font-kit"] }
gpui_tokio.workspace = true
ui.workspace = true
ui_input.workspace = true
ui_prompt.workspace = true
workspace.workspace = true
theme.workspace = true
title_bar.workspace = true
settings.workspace = true
settings_ui.workspace = true

# Networking & API (REQUIRED)
client.workspace = true
http_client.workspace = true
reqwest.workspace = true
reqwest_client.workspace = true

# Core system (REQUIRED)
anyhow.workspace = true
assets.workspace = true
clap.workspace = true
collections.workspace = true
db.workspace = true
editor.workspace = true
env_logger.workspace = true
feature_flags.workspace = true
fs.workspace = true
futures.workspace = true
language.workspace = true
log.workspace = true
menu.workspace = true
migrator.workspace = true
nc.workspace = true
nix = { workspace = true, features = ["pthread", "signal"] }
notifications.workspace = true
parking_lot.workspace = true
paths.workspace = true
profiling.workspace = true
project.workspace = true
prompt_store.workspace = true
proto.workspace = true
release_channel.workspace = true
rope.workspace = true
serde.workspace = true
serde_json.workspace = true
session.workspace = true
shellexpand.workspace = true
smol.workspace = true
sysinfo.workspace = true
telemetry.workspace = true
telemetry_events.workspace = true
time.workspace = true
url.workspace = true
util.workspace = true
uuid.workspace = true
watch.workspace = true
workspace-hack.workspace = true
zed_actions.workspace = true
zed_env_vars.workspace = true
zlog.workspace = true
zlog_settings.workspace = true

# Minimal editor support (needed by agent_ui)
breadcrumbs.workspace = true
component.workspace = true
picker.workspace = true
search.workspace = true

# Context servers & agent servers (REQUIRED for MCP)
extension.workspace = true
extension_host.workspace = true
json_schema_store.workspace = true
language_extension.workspace = true
node_runtime.workspace = true
context_server.workspace = true
agent_servers.workspace = true

# Minimal language support (needed for code display)
languages = { workspace = true, features = ["load-grammars"] }
markdown.workspace = true
snippet_provider.workspace = true

# Credentials & auth (REQUIRED)
askpass.workspace = true
crashes.workspace = true
system_specs.workspace = true

# Auto-update (optional but useful)
auto_update.workspace = true
auto_update_ui.workspace = true

# Basic integrations
audio.workspace = true
call.workspace = true
channel.workspace = true
cli.workspace = true
copilot.workspace = true
git.workspace = true
git_hosting_providers.workspace = true

# ACP/Agent 2 (REQUIRED)
agent2.workspace = true
acp_thread.workspace = true

# Zeta tools (optional AI features)
zeta.workspace = true
zeta2.workspace = true
zeta2_tools.workspace = true

# Remote support (optional)
remote.workspace = true

# Web search (useful for agent)
web_search.workspace = true
web_search_providers.workspace = true

# ============================================
# DISABLED FOR FASTER BUILDS
# Uncomment if needed
# ============================================

# Collaboration features (NOT NEEDED for Jamu)
# collab_ui.workspace = true

# Code navigation (NOT NEEDED - agent only)
# file_finder.workspace = true
# go_to_line.workspace = true
# outline.workspace = true
# outline_panel.workspace = true
# project_panel.workspace = true
# project_symbols.workspace = true

# Debugging (NOT NEEDED - agent only)
# dap_adapters.workspace = true
# debug_adapter_extension.workspace = true
# debugger_tools.workspace = true
# debugger_ui.workspace = true
# diagnostics.workspace = true

# Terminals & REPL (NOT NEEDED - agent only)
# repl.workspace = true
# terminal_view.workspace = true

# Extensions UI (NOT NEEDED - MCP only)
# extensions_ui.workspace = true

# Code tools (NOT NEEDED - agent only)
# language_onboarding.workspace = true
# language_selector.workspace = true
# language_tools.workspace = true
# line_ending_selector.workspace = true
# snippets_ui.workspace = true
# tasks_ui.workspace = true
# toolchain_selector.workspace = true

# Additional UI panels (NOT NEEDED)
# activity_indicator.workspace = true
# command_palette.workspace = true
# edit_prediction_button.workspace = true
# feedback.workspace = true
# image_viewer.workspace = true
# inspector_ui.workspace = true
# install_cli.workspace = true
# journal.workspace = true
# keymap_editor.workspace = true
# markdown_preview.workspace = true
# onboarding.workspace = true
# recent_projects.workspace = true
# settings_profile_selector.workspace = true
# svg_preview.workspace = true
# tab_switcher.workspace = true
# theme_extension.workspace = true
# theme_selector.workspace = true

# Vim mode (NOT NEEDED)
# vim.workspace = true
# vim_mode_setting.workspace = true

# Git UI (NOT NEEDED - agent only)
# git_ui.workspace = true

# AI prediction (optional)
# edit_prediction.workspace = true
# edit_prediction_context.workspace = true

# Supermaven (optional)
# supermaven.workspace = true

# Optimized allocator (optional)
# mimalloc = { version = "0.1", optional = true }

# Backtraces (optional)
# backtrace = "0.3"

# Binary encoding (optional)
# bincode.workspace = true

# URL encoding (optional)
# urlencoding.workspace = true

[target.'cfg(target_os = "windows")'.dependencies]
windows.workspace = true

[target.'cfg(target_os = "windows")'.build-dependencies]
winresource = "0.1"

[target.'cfg(any(target_os = "linux", target_os = "freebsd"))'.dependencies]
ashpd.workspace = true

[package.metadata.bundle-stable]
icon = ["resources/app-icon@2x.png", "resources/app-icon.png"]
identifier = "dev.zed.Jamu"
name = "Jamu"
osx_minimum_system_version = "10.15.7"
osx_info_plist_exts = ["resources/info/*"]
osx_url_schemes = ["jamu"]

[package.metadata.cargo-machete]
ignored = ["profiling", "zstd"]

